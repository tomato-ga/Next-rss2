(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[752],{8804:function(e,t,l){(window.__NEXT_P=window.__NEXT_P||[]).push(["/[siteId]/[itemId]",function(){return l(8926)}])},8926:function(e,t,l){"use strict";l.r(t),l.d(t,{__N_SSP:function(){return w},default:function(){return N}});var a=l(5893),s=l(7294);l(1163);var i=l(5675),r=l.n(i),c=l(3851),n=l(890),d=l(1664),o=l.n(d),x=l(3980),m=l(1708),h=l(3899),f=e=>{let{tag:t}=e,[l,i]=(0,s.useState)([]);return((0,s.useEffect)(()=>{let e=async()=>{try{let e=await fetch("https://api.erorice.com/tag?tag=".concat(t)),l=await e.json();i(l)}catch(e){console.error(e)}};e()},[t]),l.length)?(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"mt-5 mb-3 p-2 font-bold text-2xl bg-slate-400 text-black",children:(0,a.jsxs)("h2",{children:["「",t,"」の関連動画"]})}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 p-1",children:l.map(e=>{let t=e.tag.split(",").map(e=>e.trim());return(0,a.jsx)("div",{className:"border-gray-300 rounded-lg shadow-lg",children:(0,a.jsxs)("div",{onClick:()=>{(0,h.D)(e.id)},children:[(0,a.jsxs)(o(),{href:"/[siteId]/[itemId]",as:"/".concat(e.site_id,"/").concat(e.id),children:[(0,a.jsxs)("div",{className:"relative h-[270px] w-full md:h-[320px] md:w-full",children:[(0,a.jsx)("img",{src:e.imgurl,className:"w-full h-full object-cover",alt:e.title}),(0,a.jsx)("span",{className:"absolute rounded-md top-2 left-2 bg-white bg-opacity-90 text-red-600 text-xl font-bold tracking-widest text-center p-1",children:(0,a.jsx)(m.Z,{itemId:e.id})})]}),(0,a.jsx)("p",{className:"m-2 text-sm md:text-xl font-bold text-blue-600",children:e.title})]}),(0,a.jsx)(x.Z,{tagsArray:t,numberTags:5})]})},e.id)})})]}):null},u=e=>{let{localData:t}=e;return(0,a.jsx)("div",{className:"flex flex-wrap justify-center lg:flex-nowrap",children:t?t.slice(0,5).map((e,t)=>(0,a.jsx)("div",{className:"w-full md:w-1/2 lg:w-auto mb-3",children:e.map((e,t)=>(0,a.jsx)("div",{onClick:()=>{(0,h.D)(e.id)},children:(0,a.jsx)(o(),{href:"/[siteId]/[itemId]",as:"/".concat(e.site_id,"/").concat(e.id),children:(0,a.jsxs)("div",{className:"mr-3 flex flex-col lg:flex-inline",children:[(0,a.jsx)("div",{className:"relative flex justify-center items-center h-[200px] md:h-[170px] w-[250px] md:w-[170px] mx-auto",children:(0,a.jsx)(r(),{className:"",fill:!0,src:e.imgurl,alt:e.title,sizes:"(max-width: 600px) 50vw, (max-width: 768px) 50vw, (max-width: 1200px) 50vw"})}),(0,a.jsx)("h3",{className:"p-2 text-center text-base",children:e.title})]})},t)},t))},t)):null})},g=e=>{let{postId:t,articleData:l}=e,[i,r]=(0,s.useState)(0),[c,n]=(0,s.useState)(!1);(0,s.useEffect)(()=>{(()=>{let e=!!localStorage.getItem("fav_".concat(t));if(e){n(!0);return}let l=localStorage.getItem("favArticleData");if(l){let e=JSON.parse(l),a=e.some(e=>e.id===t);n(a)}})()},[t]);let d=async()=>{if(console.log("Button clicked!"),c){localStorage.removeItem("fav_".concat(t));let e=localStorage.getItem("favArticleData");e=e?JSON.parse(e):[];let l=e.filter(e=>e.id!==t);localStorage.setItem("favArticleData",JSON.stringify(l)),n(!1);return}try{let e=await (0,h.h)(t);r(e),localStorage.setItem("fav_".concat(t),"true"),n(!0);let a=localStorage.getItem("favArticleData");a=a?JSON.parse(a):[];let s=a.some(e=>e.id===t);s||(500===a.length&&a.pop(),a.unshift(l),localStorage.setItem("favArticleData",JSON.stringify(a)))}catch(e){console.error("Failed to handle fav count",e)}};return(0,a.jsx)("div",{className:"flex gap-2 items-center",onClick:d,children:(0,a.jsxs)("button",{className:"py-1.5 px-3 ".concat(c?"opacity-50":"hover:text-blue-600 hover:scale-105 hover:shadow"," text-center border  rounded-md font-bold border-blue-400 text-blue-700 h-8 text-sm flex items-center gap-1 lg:gap-2"),children:[c?"お気に入りを削除する":"お気に入りに登録する",(0,a.jsx)("svg",{className:"w-4 h-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.633 10.5c.806 0 1.533-.446 2.031-1.08a9.041 9.041 0 012.861-2.4c.723-.384 1.35-.956 1.653-1.715a4.498 4.498 0 00.322-1.672V3a.75.75 0 01.75-.75A2.25 2.25 0 0116.5 4.5c0 1.152-.26 2.243-.723 3.218-.266.558.107 1.282.725 1.282h3.126c1.026 0 1.945.694 2.054 1.715.045.422.068.85.068 1.285a11.95 11.95 0 01-2.649 7.521c-.388.482-.987.729-1.605.729H13.48c-.483 0-.964-.078-1.423-.23l-3.114-1.04a4.501 4.501 0 00-1.423-.23H5.904M14.25 9h2.25M5.904 18.75c.083.205.173.405.27.602.197.4-.078.898-.523.898h-.908c-.889 0-1.713-.518-1.972-1.368a12 12 0 01-.521-3.507c0-1.553.295-3.036.831-4.398C3.387 10.203 4.167 9.75 5 9.75h1.053c.472 0 .745.556.5.96a8.958 8.958 0 00-1.302 4.665c0 1.194.232 2.333.654 3.375z"})})]})})},p=l(5700),j=l(8054),v=l(2962),w=!0,N=e=>{let{data:t}=e,[l,i]=(0,s.useState)([]);if((0,s.useEffect)(()=>{let e;if(!t)return;let l=JSON.parse(localStorage.getItem("articleData"))||[],a=new Date().toISOString(),s={...t[0],timestamp:a},r=l.some(e=>e[0].id===s.id);r&&(l=l.filter(e=>e[0].id!==s.id)),500===l.length&&l.pop(),l.unshift([s]),localStorage.setItem("articleData",JSON.stringify(l)),(e=JSON.parse(localStorage.getItem("articleData"))||[]).sort((e,t)=>new Date(t[0].timestamp)-new Date(e[0].timestamp)),e&&i(e)},[t]),!t)return(0,a.jsx)("p",{children:"ロード中です。もしかしたらデータないかも"});let r=t[0].tag.split(",");return(0,a.jsxs)("div",{children:[(0,a.jsx)(v.PB,{title:t[0].title,description:t[0].description,canonical:"http://localhost:3000/".concat(t[0].site_id,"/").concat(t[0].id)}),(0,a.jsx)(c.Z,{}),(0,a.jsx)(j.Z,{}),(0,a.jsxs)("div",{className:"container mx-auto px-4 py-6 flex flex-col-reverse md:flex-row",children:[(0,a.jsx)(n.Z,{}),(0,a.jsxs)("div",{className:"md:w-3/4 md:ml-4 overflow-hidden",children:[(0,a.jsx)("h1",{className:"m-2 text-xl md:text-4xl font-bold text-blue-600 border-b pb-2",children:t[0].title}),(0,a.jsxs)("div",{className:"grid md:grid-cols-2 gap-2",children:[(0,a.jsx)("div",{className:"desc p-5",children:(0,a.jsx)("img",{src:t[0].imgurl})}),(0,a.jsxs)("div",{className:"p-2 md:p-4",children:[(0,a.jsx)(x.Z,{tagsArray:r,numberTags:20}),(0,a.jsx)(g,{postId:t[0].id,articleData:t})]}),(0,a.jsx)("div",{className:"p-2 md:p-4"})]}),(0,a.jsx)("div",{className:"text-2xl bg-blue-700 text-white text-center font-semibold hover:bg-orange-700 rounded-md",children:(0,a.jsx)("h3",{children:(0,a.jsxs)("a",{href:t[0].link,target:"_blank",children:[t[0].title,"のページを見る"]})})}),(0,a.jsx)("div",{className:"mt-5 mb-3 p-2 font-bold text-2xl bg-slate-400 text-black",children:(0,a.jsx)("h2",{children:"最近チェックした動画"})}),(0,a.jsx)("div",{className:"relative",children:(0,a.jsx)(u,{localData:l})}),(0,a.jsx)(f,{tag:r[0]})]})]}),(0,a.jsx)(p.Z,{})]})}}},function(e){e.O(0,[61,76,774,888,179],function(){return e(e.s=8804)}),_N_E=e.O()}]);